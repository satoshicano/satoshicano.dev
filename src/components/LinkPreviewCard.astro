---
import { getLinkPreview } from "../utils";

interface Props {
	url: string;
}

const { url } = Astro.props;

const metadata = await getLinkPreview(url);
---

<div class="link-preview-card">
  {metadata ? (
    <>
      <a href={url} target="_blank" rel="noopener noreferrer">
        <img src={metadata.image} alt={metadata.title} />
        <h3>{metadata.title}</h3>
        <p>{metadata.description}</p>
      </a>
    </>
  ) : (
    <p>Loading preview...</p>
  )}
</div>

<style>
.link-preview-card {
  border: 1px solid #ddd;
  border-radius: 8px;
  overflow: hidden;
  margin-bottom: 16px;
}

.link-preview-card a {
  display: block;
  padding: 16px;
  text-decoration: none;
  color: #333;
}

.link-preview-card img {
  width: 100%;
  height: auto;
  margin-bottom: 8px;
}

.link-preview-card h3 {
  margin-bottom: 8px;
}

.link-preview-card p {
  font-size: 0.9em;
  color: #666;
}
</style>
